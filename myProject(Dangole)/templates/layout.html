<!DOCTYPE HTML>
<html lang="kr">
  <head>
    <meta charset="utf-8">
    <!-- Webpage Title -->
    <title>한정서_Muckjjal</title>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
		
		<!-- JS -->		
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <title>Dangole</title>
    <script>
      $(document).ready(function() {
        // index.html 로드가 완료되면 자동으로 show_star() 함수를 호출합니다.
        show_videos();
      });
      
      function show_videos(){
        // 1. #star_box의 내부 html 태그를 모두 삭제합니다.
        $('#video-box').empty()
      
        // 2. 서버에 1) GET 방식으로, 2) /api/list 라는 주소로 star_list를 요청합니다.
        $.ajax({
            type: "GET",
            url: "/list/getVideo",
            data: {},
            success: function (response) {
                // 3. 서버가 돌려준 star_list를 star라는 변수에 저장합니다.
                let videos = response['videos_list']
                // 4. for 문을 활용하여 star 배열의 요소를 차례대로 조회합니다.
                for (let i = 0; i < videos.length; i+=3) {
                    let video1 = videos[i]
                    let video2 = videos[i+1]
                    let video3 = videos[i+2]
                    // 5. star[i] 요소의 name, url, img_url, recent, like 키 값을 활용하여 값을 조회합니다.
                    let videoId1 = video1['videoId']
                    let title1 = video1['title']
                    let desc1 = video1['desc']
                    let img_url1 = video1['img_url']
                    let channelTitle1 = video1['channelTitle']
                    let publishTime1= video1['publishTime']
                    
                    let videoId2 = video2['videoId']
                    let title2 = video2['title']
                    let desc2 = video2['desc']
                    let img_url2 = video2['img_url']
                    let channelTitle2 = video2['channelTitle']
                    let publishTime2= video2['publishTime']

                    let videoId3 = video3['videoId']
                    let title3 = video3['title']
                    let desc3 = video3['desc']
                    let img_url3 = video3['img_url']
                    let channelTitle3 = video3['channelTitle']
                    let publishTime3 = video3['publishTime']
      
                    // 6. 영화인 카드를 만듭니다.
                    let temp_html = ` <div class="card-deck">
                                      <div class="card">
                                      <img class="card-img-top" src="${img_url1}" alt="Card image cap">
                                      <div class="card-body">
                                        <a href="https://www.youtube.com/watch?v=${videoId1}" target="_blank"><h5 name="title">${title1}</h5></a>
                                        <p class="card-text">${desc1}</p>
                                        <p class="card-text"><small class="text-muted">${channelTitle1}</small></p>
                                        <p class="card-text"><small class="text-muted">${publishTime1}</small></p>
                                        <button type="submit" class="btn btn-warning" data-toggle="modal" data-target="#exampleModal" onclick="save()">보관함에 저장</button>
                                      </div>
                                    </div>
                                    
                                    <div class="card">
                                      <img class="card-img-top" src="${img_url2}" alt="Card image cap">
                                      <div class="card-body">
                                        <a href="https://www.youtube.com/watch?v=${videoId2}" target="_blank"><h5 class="card-title">${title2}</h5></a>
                                        
                                        <p class="card-text">${desc2}</p>
                                        <p class="card-text"><small class="text-muted">${channelTitle2}</small></p>
                                        <p class="card-text"><small class="text-muted">${publishTime2}</small></p>
                                        <button type="button" class="btn btn-warning" data-toggle="modal" data-target="#exampleModal" >보관함에 저장</button>
                                      </div>
                                    </div>
                                    
                                    <div class="card">
                                      <img class="card-img-top" src="${img_url3}" alt="Card image cap">
                                      <div class="card-body">
                                        <a href="https://www.youtube.com/watch?v=${videoId3}" target="_blank"><h5 class="card-titl">${title3}</h5></a>
                                        
                                        <p class="card-text">${desc3}</p>
                                        <p class="card-text"><small class="text-muted">${channelTitle3}</small></p>
                                        <p class="card-text"><small class="text-muted">${publishTime3}</small></p>
                                        <button type="button" class="btn btn-warning" data-toggle="modal" data-target="#exampleModal" >보관함에 저장</button>
                                      </div>
                                    </div>
                                    </div><br>`
      
                    // 7. #star-box에 temp_html을 붙입니다.
                    $('#video-box').append(temp_html)
                }
            }
        });
      }
      function save(){
        var title = $('input[name=title]').val();
        alert(title)
        let temp_html = `
                  <label for="restaurant" class="col-form-label">영상 제목 : </label>
                  <input type="text" class="form-control" name="title" value="${title}">`
        
        $('#title_save').append(temp_html)

      }
      function getInputValue(){

        $('#card-box').empty()

        var title = $('input[name=title]').val();
        var restaurant = $('input[name=restaurant]').val();
        var food_catg = $('input[name=food_catg]').val();
        var location = $('input[name=location]').val();
        var memo = $('#message-text').val();
        alert(title+restaurant+food_catg+location+memo)

        $.ajax({
          type: "POST",
          url: "/mypage/getContents",
          data: { 'title_give':title, 'restaurant_give':restaurant, 'food_catg_give':food_catg,'location_give':location,'memo_give':memo},
          success: function (response) {
              if (response['result'] == 'success') {
                let video = response['video']
                alert(video)

                let videoId = video['videoId']
                let title = video['title']
                let desc = video['desc']
                let img_url = video['img_url']
                let channelTitle = video['channelTitle']
                let publishTime= video['publishTime']

                
                let temp_html = `<div class="card-deck">
                                      <div class="card">
                                      <img class="card-img-top" src="${img_url}" alt="Card image cap">
                                      <div class="card-body">
                                        <a href="https://www.youtube.com/watch?v=${videoId}" target="_blank"><h5 class="card-title">${title}</h5></a>
                                        <p class="card-text">${desc}</p>
                                        <p class="card-text"><small class="text-muted">${channelTitle}</small></p>
                                        <p class="card-text"><small class="text-muted">${publishTime}</small></p>
                                        <button type="submit" class="btn btn-warning" data-toggle="modal" data-target="#exampleModal" onclick="save()">보관함에 저장</button>
                                      </div>
                                    </div>`
                                
                $('#card-box').append(temp_html) 
              }
          }
        });

      }
      function like_star(name){
      // 1. 서버에 1) POST 방식으로, 2) /api/like 라는 url에, 3) name_give라는 이름으로 name을 전달합니다.
      // 참고) POST 방식이므로 data: {'name_give': name} 과 같은 양식이 되어야합니다!
        
      }
    </script>
    <style>
      .index{
        background-color : #D6D6D6;
        
      }
      .wrap{
        background-color :#D6D6D6;
      }

      .display-4{
        background-color: whitesmoke;
        background-color: rgba( 255, 255, 255, 0.5 )
      }
      .lead{
        background-color: whitesmoke;
        background-color: rgba( 255, 255, 255, 0.5 )
      }
      .jumbotron-fluid{
        
        width: 1200px;
        height: 796px;
        margin: auto;
        background-image: url("../static/pizzamain.png");
      }
      .jumbotron-fluid1{
        
        width: 1500px;
        margin: auto;
        background-image: url("../static/pizza1500.png");
      }
      .jumbotron-fluid2{
        width: 1500px;
        margin: auto;
        background-image: url("../static/pizza1500.png");
      }
      .container{
        width: 700px;
        margin: auto;
      }
      .card-deck{
        width: 1100px;
        margin:auto;
      }
      .carousel{
        width:  400px;
        margin:auto;
      }
      .row{
        width:1100px;
        margin:auto;
      }
    </style>
  </head>
 
  <body clss="wrap">
    <header>
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo01" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
          <a class="navbar-brand" href="/">Muckjjal</a>
          <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
            <li class="nav-item active">
              <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/list">Videos</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/mypage">Mypage</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://www.youtube.com">Youtube</a>
            </li>
          </ul>
          <form class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
          </form>
        </div>
      </nav>
      <hr>
    </header>
    
 
    <main role="main">
    <!-- Main content block -->
    {% block content %}{% endblock %}
    </main>
  </body>
</html>